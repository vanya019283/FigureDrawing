<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script>
        let masPoint = new Array();
        let rPoint = 5;
        let iReset = -1
        document.addEventListener("DOMContentLoaded", ()=>{
            let canvas = document.getElementById('myConvas');
            canvas.width = document.documentElement.clientWidth * 0.8;
            canvas.height = document.documentElement.clientHeight * 0.7;
            

            canvas.addEventListener('mousedown', function (e) {
                let selectPoint = CheckSelectPoint({x:e.offsetX, y:e.offsetY})

                //document.getElementById('myXY1').textContent = e.offsetX + '/' + e.offsetY;

                if (masPoint.length < 3){
                    masPoint.push({x: e.offsetX, y: e.offsetY})
                    document.getElementById('myXY' + masPoint.length).textContent = e.offsetX + '/' + e.offsetY;
                    if (masPoint.length < 3){
                        let ctx = canvas.getContext('2d');
                        ctx.beginPath();
                        ctx.strokeStyle = 'black';
                        ctx.arc(masPoint[masPoint.length-1].x,masPoint[masPoint.length-1].y,rPoint,0,Math.PI*2,true);
                        ctx.stroke();
                    } else {
                        ShowFigure();
                    }
                } else if (selectPoint != -1 && iReset == -1){
                    let ctx = canvas.getContext('2d');
                    ctx.beginPath();
                    ctx.strokeStyle = 'red';
                    ctx.arc(masPoint[selectPoint].x, masPoint[selectPoint].y, rPoint, 0, Math.PI*2, true);
                    ctx.stroke();
                    iReset = selectPoint;
                    document.getElementById('myXY' + (iReset + 1)).textContent = 'no';
                } else if (selectPoint == -1 && iReset != -1){
                    masPoint[iReset].x = e.offsetX;
                    masPoint[iReset].y = e.offsetY;
                    document.getElementById('myXY'  + (iReset + 1)).textContent = masPoint[iReset].x + '/' + e.offsetY;
                    iReset = -1;
                    ShowFigure();
                } else {
                    alert("–¢–æ—á–∫–∏ —É–∂–µ –≤—ã–±—Ä–∞–Ω—ã, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ.");
                }
            });
        });
        function CheckSelectPoint(chPoint){
            for(let i = 0; i < masPoint.length; i++){
                if ((Math.pow((chPoint.x - masPoint[i].x), 2) + Math.pow((chPoint.y - masPoint[i].y), 2)) <= Math.pow(rPoint, 2)){
                    return i;
                }
            }
            return -1;
        }
        function AreaTrap(){
            let a = Math.sqrt(Math.pow((masPoint[1].x - masPoint[0].x), 2) + Math.pow((masPoint[1].y - masPoint[0].y), 2));
            let b = Math.sqrt(Math.pow((masPoint[2].x - masPoint[1].x), 2) + Math.pow((masPoint[2].y - masPoint[1].y), 2));
            let c = Math.sqrt(Math.pow((masPoint[0].x - masPoint[2].x), 2) + Math.pow((masPoint[0].y - masPoint[2].y), 2));
            let res = Math.sqrt(((a+b+c)/2) * (((a+b+c)/2) - a) * (((a+b+c)/2) - b) * (((a+b+c)/2) - c)) * 2;
            return res;
        }
        function ShowFigure(){
            let centrPar = {
                x: ((masPoint[0].x + masPoint[2].x)/2),
                y: ((masPoint[0].y + masPoint[2].y)/2)
            };
            let lostPoint = {
                x: (2*centrPar.x - masPoint[1].x),
                y: (2*centrPar.y - masPoint[1].y)
            };
            let r–°ircle = Math.sqrt(AreaTrap() / Math.PI);

            let canvas = document.getElementById('myConvas');
            let ctx = canvas.getContext('2d');

            ctx.beginPath();
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = 'blue';
            ctx.moveTo(masPoint[0].x, masPoint[0].y);
            ctx.lineTo(masPoint[1].x, masPoint[1].y);
            ctx.lineTo(masPoint[2].x, masPoint[2].y);
            ctx.lineTo(lostPoint.x, lostPoint.y);
            ctx.lineTo(masPoint[0].x, masPoint[0].y);
            ctx.stroke();

            ctx.beginPath();
            ctx.strokeStyle = 'black';
            ctx.arc(masPoint[0].x, masPoint[0].y, rPoint, 0, Math.PI*2, true);
            ctx.moveTo(masPoint[1].x + rPoint, masPoint[1].y);
            ctx.arc(masPoint[1].x, masPoint[1].y, rPoint, 0, Math.PI*2, true);
            ctx.moveTo(masPoint[2].x + rPoint, masPoint[2].y);
            ctx.arc(masPoint[2].x, masPoint[2].y, rPoint, 0, Math.PI*2, true);
            ctx.stroke();

            ctx.beginPath();
            ctx.strokeStyle = 'yellow';
            ctx.arc(centrPar.x, centrPar.y, r–°ircle, 0, Math.PI*2, true);
            ctx.stroke();

            document.getElementById('sFig').textContent = Math.round(AreaTrap());
        }

        function FReset(){
            document.location.reload();
        }
        
        function FShift(){
            let temp = masPoint[0];
            for(let i = 1; i < masPoint.length; i++){
                masPoint[i - 1] = masPoint[i];
            }
            masPoint[masPoint.length - 1] = temp;
            if (iReset != -1){
                iReset = -1;
            }
            ShowFigure();
        }

        function Instruction(){
            alert("–ù–∞ —Ä–∞–±–æ—á–µ–π –æ–±–ª–∞—Å—Ç–∏ –Ω—É–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —Ç—Ä–∏ —Ç–æ—á–∫–∏, –ø–æ —ç—Ç–∏–º —Ç–æ—á–∫–∞–º –±—É–¥–µ—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã –ø–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º –∏ –∫—Ä—É–≥ —Å –æ–±—â–∏ —Ü–µ–Ω—Ç—Ä–æ–º –∏ –ø–ª–æ—â–∞–¥—å—é.\n" + 
                "–ö–Ω–æ–ø–∫–æ–π ¬´–ü–æ–≤–µ—Ä–Ω—É—Ç—å¬ª –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º–∞, –Ω–∞—Ä–∏—Å–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ —Ç—Ä–µ–º —Ç–æ–∫–∞–º.\n" +
                "–ö–Ω–æ–ø–∫–æ–π ¬´–°–±—Ä–æ—Å¬ª –º–æ–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ—Ö —Ç–æ—á–µ–∫ –∏ –Ω–∞—á–∞—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞–Ω–æ–≤–æ.\n" +
                "–ö–∞–∂–¥—É—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Ç–æ—á–∫—É, –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ.\n" +
                "–í –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ –∏ –ø–ª–æ—â–∞–¥—å —Ñ–∏–≥—É—Ä –≤ –ø–∏–∫—Å–µ–ª—è—Ö.\n");
        }

        function About(){
            alert("\n–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ß—É–π–∫–æ –ò–≤–∞–Ω–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á–∞, –∫–æ—Ç–æ—Ä—ã–π –±–µ–∑—É–º–Ω–æ —Ö–æ—á–µ—Ç —Å—Ç–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –ü–û üòä\n" +
                "–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:\n" +
                "–¢–µ–ª.: 0960634231\n" +
                "Skype: live:.cid.64012350190e4cfa\n");
        }
    </script>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
            <div class="container">
                <div class="d-flex flex-row bd-highlight mb-3">
                    <button type="button" class="btn btn-link" onclick="FReset()">–°–±—Ä–æ—Å</button>
                    <button type="button" class="btn btn-link" onclick="FShift()">–ü–æ–≤–µ—Ä–Ω—É—Ç—å</button>
                    <button type="button" class="btn btn-link" onclick="Instruction()">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</button>
                    <button type="button" class="btn btn-link" onclick="About()">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</button>
                  </div>
            </div>
            
        </nav>
    </header>
    <div class="container text-center">
        <canvas id="myConvas" class="bg-light border"></canvas>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container">
            <P>–¢–æ—á–∫–∞ ‚Ññ1(X\Y): <b><span id="myXY1">no</span></b>; –¢–æ—á–∫–∞ ‚Ññ2(X\Y): <b><span id="myXY2">no</span></b>; –¢–æ—á–∫–∞ ‚Ññ3(X\Y): <b><span id="myXY3">no</span></b>;</P>
            <p>–ü–ª–æ—â–∞–¥—å –ø–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º–∞ –∏ –∫—Ä—É–≥–∞: <b><span id="sFig">0</span></b> px;</p>
        </div>
    </footer>
</body>
</html>